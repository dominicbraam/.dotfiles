#!/bin/bash

COMMANDS=("cd" "tn" "help")

function fzcd {
  if [ -z "$1" ]; then
    cd $(fd --hidden --type directory "" $HOME | fzf)
  else
    cd $(fd --hidden --type directory $1 $HOME | fzf)
  fi
}

function fztn {
  if [ -z "$1" ]; then
    dir=$(pwd)
  else
    dir=$(fd --hidden --type directory $1 $HOME | fzf)
  fi
  session_name=$(basename $dir)
  tmux new -s $session_name -c $dir
}

function fztnrofi {
  dir=$(fd --type directory "" $1 | rofi -dmenu -i -no-show-icons)
  session_name=$(basename $dir)
  alacritty --working-directory $dir --command tmux new -s $session_name
}

function fzcdrofi {
  dir=$(fd --type directory "" $1 | rofi -dmenu -i -no-show-icons)
  session_name=$(basename $dir)
  alacritty --working-directory $dir
}

function print_commands {
  echo  "Available commands:"
  for command in ${COMMANDS[@]}
  do
    echo $command
  done
}

case $1 in
  cd)
    fzcd $2
    ;;
  cdrofi)
    fzcdrofi
    ;;
  tn)
    fztn $2
    ;;
  tnprojrofi)
    fztnrofi "Projects"
    ;;
  help)
    print_commands
    ;;
  *)
    echo -n "Unknown command.\n"
    print_commands
esac
